{"version":3,"sources":["index.tsx"],"names":["Dimensions","get","screenHeight","height","P","android","ios","Platform","OS","magic","damping","mass","stiffness","overshootClamping","restSpeedThreshold","restDisplacementThreshold","deceleration","bouncyFactor","velocityFactor","toss","coefForTranslatingVelocities","set","Animated","cond","onChange","block","eq","greaterOrEq","sqrt","not","defined","max","add","and","Value","spring","or","divide","greaterThan","sub","event","diff","multiply","clockRunning","startClock","stopClock","decay","Clock","lessThan","call","lessOrEq","neq","runDecay","clock","value","velocity","wasStartedFromBegin","state","finished","position","time","config","withPreservingAdditiveOffset","drag","prev","valWithPreservedOffset","GestureState","BEGAN","withDecaying","decayClock","prevent","valDecayed","offset","END","ACTIVE","BottomSheetBehavior","props","panState","tapState","panMasterState","masterVelocity","isManuallySetValue","manuallySetValue","masterClockForOverscroll","preventDecaying","dragMasterY","dragY","onOpenStartValue","onOpenEndValue","onCloseStartValue","onCloseEndValue","handleMasterPan","nativeEvent","translationY","velocityY","handlePan","enabledInnerScrolling","handleTap","snapTo","index","enabledImperativeSnapping","setValue","snapPoints","propsToNewIndices","handleLayoutHeader","heightOfHeader","layout","heightOfHeaderAnimated","setState","handleFullHeader","handleLayoutContent","heightOfContent","initSnap","panRef","innerGestureHandlerRefs","master","tapRef","getDerivedStateFromProps","undefined","init","middlesOfSnapPoints","i","length","push","masterOffseted","tossForMaster","springConfig","hasOwnProperty","destinationPoint","currentSnapPoint","snapPoint","masterClock","prevMasterDrag","wasRun","translateMaster","runSpring","overdragResistanceFactor","Y","withEnhancedLimits","dest","isManuallySet","toValue","val","wasRunMaster","min","limitedVal","diffPres","flagWasRunSpring","justEndedIfEnded","wasEndedMasterAfterInner","prevMaster","prevState","rev","width","zIndex","opacity","transform","translateY","enabledGestureInteraction","enabledHeaderGestureInteraction","simultaneousHandlers","renderHeader","overflow","enabledContentGestureInteraction","enabledContentTapInteraction","renderContent","callbackNode","onOpenStart","onCloseEnd","callbackThreshold","onOpenEnd","onCloseStart","contentPosition","headerPosition","sortedPropsSnapPoints","map","s","ind","renumber","Error","sort","a","b","forEach","p","initialSnap","React","Component","defaultProps","createRef","str","Number","split"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport { Dimensions, Platform, View, LayoutChangeEvent } from 'react-native'\nimport Animated from 'react-native-reanimated'\nimport {\n  PanGestureHandler,\n  TapGestureHandler,\n  State as GestureState,\n} from 'react-native-gesture-handler'\n\ntype Props = {\n  /**\n   * Points for snapping of bottom sheet component. They define distance from bottom of the screen.\n   * Might be number or percent (as string e.g. '20%') for points or percents of screen height from bottom.\n   */\n  snapPoints: (number | string)[]\n\n  /**\n   * Determines initial snap point of bottom sheet. Defaults to 0.\n   */\n  initialSnap: number\n\n  /**\n   * Method for rendering scrollable content of bottom sheet.\n   */\n  renderContent?: () => React.ReactNode\n\n  /**\n   * Method for rendering non-scrollable header of bottom sheet.\n   */\n  renderHeader?: () => React.ReactNode\n\n  /**\n   * Defines if bottom sheet could be scrollable by gesture. Defaults to true.\n   */\n  enabledGestureInteraction?: boolean\n  enabledHeaderGestureInteraction?: boolean\n  enabledContentGestureInteraction?: boolean\n\n  /**\n   * Defines if bottom sheet content responds to taps. Defaults to true.\n   */\n  enabledContentTapInteraction?: boolean\n\n  /**\n   * If false blocks snapping using snapTo method. Defaults to true.\n   */\n  enabledManualSnapping?: boolean\n\n  /**\n   * Defines whether it's possible to scroll inner content of bottom sheet. Defaults to true.\n   */\n  enabledInnerScrolling?: boolean\n\n  /**\n   * Reanimated node which holds position of bottom sheet, where 1 it the highest snap point and 0 is the lowest.\n   */\n  callbackNode?: Animated.Value<number>\n\n  /**\n   * Reanimated node which holds position of bottom sheet;s content (in dp).\n   */\n  contentPosition?: Animated.Value<number>\n\n  /**\n   * Reanimated node which holds position of bottom sheet's header (in dp).\n   */\n  headerPosition?: Animated.Value<number>\n\n  /**\n   * Defines how violently sheet has to stopped while overdragging. 0 means no overdrag. Defaults to 0.\n   */\n  overdragResistanceFactor: number\n\n  /**\n   * Array of Refs passed to gesture handlers for simultaneous event handling\n   */\n  simultaneousHandlers?: Array<React.RefObject<any>> | React.RefObject<any>\n\n  /**\n   * Overrides config for spring animation\n   */\n  springConfig: {\n    damping?: number\n    mass?: number\n    stiffness?: number\n    restSpeedThreshold?: number\n    restDisplacementThreshold?: number\n    toss?: number\n  }\n\n  /**\n   * Refs for gesture handlers used for building bottomsheet\n   */\n  innerGestureHandlerRefs: [\n    React.RefObject<PanGestureHandler>,\n    React.RefObject<PanGestureHandler>,\n    React.RefObject<TapGestureHandler>\n  ]\n\n  enabledImperativeSnapping?: boolean\n\n  onOpenStart?: () => void\n  onOpenEnd?: () => void\n  onCloseStart?: () => void\n  onCloseEnd?: () => void\n  callbackThreshold?: number\n}\n\ntype State = {\n  snapPoints: Animated.Value<number>[]\n  init: any\n  initSnap: number\n  propsToNewIndices: { [key: string]: number }\n  heightOfContent: Animated.Value<number>\n  heightOfHeader: number\n  heightOfHeaderAnimated: Animated.Value<number>\n}\n\nconst { height: screenHeight } = Dimensions.get('window')\n\nconst P = <T extends any>(android: T, ios: T): T =>\n  Platform.OS === 'ios' ? ios : android\n\nconst magic = {\n  damping: 50,\n  mass: 0.3,\n  stiffness: 121.6,\n  overshootClamping: true,\n  restSpeedThreshold: 0.3,\n  restDisplacementThreshold: 0.3,\n  deceleration: 0.999,\n  bouncyFactor: 1,\n  velocityFactor: P(1, 0.8),\n  toss: 0.4,\n  coefForTranslatingVelocities: 5,\n}\n\nconst {\n  damping,\n  mass,\n  stiffness,\n  overshootClamping,\n  restSpeedThreshold,\n  restDisplacementThreshold,\n  deceleration,\n  velocityFactor,\n  toss,\n} = magic\n\nconst {\n  set,\n  cond,\n  onChange,\n  block,\n  eq,\n  greaterOrEq,\n  sqrt,\n  not,\n  defined,\n  max,\n  add,\n  and,\n  Value,\n  spring,\n  or,\n  divide,\n  greaterThan,\n  sub,\n  event,\n  diff,\n  multiply,\n  clockRunning,\n  startClock,\n  stopClock,\n  decay,\n  Clock,\n  lessThan,\n  call,\n  lessOrEq,\n  neq,\n} = Animated\n\nfunction runDecay(\n  clock: Animated.Clock,\n  value: Animated.Node<number>,\n  velocity: Animated.Node<number>,\n  wasStartedFromBegin: Animated.Value<number>\n) {\n  const state = {\n    finished: new Value(0),\n    velocity: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n  }\n\n  const config = { deceleration }\n\n  return [\n    cond(clockRunning(clock), 0, [\n      cond(wasStartedFromBegin, 0, [\n        set(wasStartedFromBegin, 1),\n        set(state.finished, 0),\n        set(state.velocity, multiply(velocity, velocityFactor)),\n        set(state.position, value),\n        set(state.time, 0),\n        startClock(clock),\n      ]),\n    ]),\n    cond(clockRunning(clock), decay(clock, state, config)),\n    cond(state.finished, stopClock(clock)),\n    state.position,\n  ]\n}\n\nfunction withPreservingAdditiveOffset(\n  drag: Animated.Node<number>,\n  state: Animated.Node<number>\n) {\n  const prev = new Value(0)\n  const valWithPreservedOffset = new Value(0)\n  return block([\n    cond(\n      eq(state, GestureState.BEGAN),\n      [set(prev, 0)],\n      [\n        set(\n          valWithPreservedOffset,\n          add(valWithPreservedOffset, sub(drag, prev))\n        ),\n        set(prev, drag),\n      ]\n    ),\n    valWithPreservedOffset,\n  ])\n}\n\nfunction withDecaying(\n  drag: Animated.Node<number>,\n  state: Animated.Node<number>,\n  decayClock: Animated.Clock,\n  velocity: Animated.Node<number>,\n  prevent: Animated.Value<number>\n) {\n  const valDecayed = new Value(0)\n  const offset = new Value(0)\n  // since there might be moar than one clock\n  const wasStartedFromBegin = new Value(0)\n  return block([\n    cond(\n      eq(state, GestureState.END),\n      [\n        cond(\n          prevent,\n          stopClock(decayClock),\n          set(\n            valDecayed,\n            runDecay(\n              decayClock,\n              add(drag, offset),\n              velocity,\n              wasStartedFromBegin\n            )\n          )\n        ),\n      ],\n      [\n        stopClock(decayClock),\n        cond(eq(state, GestureState.BEGAN), set(prevent, 0)),\n        cond(\n          or(eq(state, GestureState.BEGAN), eq(state, GestureState.ACTIVE)),\n          set(wasStartedFromBegin, 0)\n        ),\n        cond(eq(state, GestureState.BEGAN), [\n          set(offset, sub(valDecayed, drag)),\n        ]),\n        set(valDecayed, add(drag, offset)),\n      ]\n    ),\n    valDecayed,\n  ])\n}\n\nexport default class BottomSheetBehavior extends React.Component<Props, State> {\n  static defaultProps = {\n    overdragResistanceFactor: 0,\n    initialSnap: 0,\n    enabledImperativeSnapping: true,\n    enabledGestureInteraction: true,\n    enabledHeaderGestureInteraction: true,\n    enabledContentGestureInteraction: true,\n    enabledContentTapInteraction: true,\n    enabledInnerScrolling: true,\n    springConfig: {},\n    innerGestureHandlerRefs: [\n      React.createRef(),\n      React.createRef(),\n      React.createRef(),\n    ],\n    callbackThreshold: 0.01,\n  }\n\n  private decayClock = new Clock()\n  private panState = new Value(0)\n  private tapState = new Value(0)\n  private velocity = new Value(0)\n  private panMasterState = new Value(GestureState.END)\n  private masterVelocity = new Value(0)\n  private isManuallySetValue: Animated.Value<number> = new Value(0)\n  private manuallySetValue = new Value(0)\n  private masterClockForOverscroll = new Clock()\n  private preventDecaying: Animated.Value<number> = new Value(0)\n  private dragMasterY = new Value(0)\n  private dragY = new Value(0)\n  private translateMaster: Animated.Node<number>\n  private panRef: React.RefObject<PanGestureHandler>\n  private master: React.RefObject<PanGestureHandler>\n  private tapRef: React.RefObject<TapGestureHandler>\n  private snapPoint: Animated.Node<number>\n  private Y: Animated.Node<number>\n  private onOpenStartValue: Animated.Value<number> = new Value(0)\n  private onOpenEndValue: Animated.Value<number> = new Value(0)\n  private onCloseStartValue: Animated.Value<number> = new Value(1)\n  private onCloseEndValue: Animated.Value<number> = new Value(0)\n\n  constructor(props: Props) {\n    super(props)\n\n    this.panRef = props.innerGestureHandlerRefs[0]\n    this.master = props.innerGestureHandlerRefs[1]\n    this.tapRef = props.innerGestureHandlerRefs[2]\n    this.state = BottomSheetBehavior.getDerivedStateFromProps(props, undefined)\n\n    const { snapPoints, init } = this.state\n    const middlesOfSnapPoints: Animated.Node<number>[] = []\n    for (let i = 1; i < snapPoints.length; i++) {\n      middlesOfSnapPoints.push(divide(add(snapPoints[i - 1], snapPoints[i]), 2))\n    }\n    const masterOffseted = new Value(init)\n    // destination point is a approximation of movement if finger released\n    const tossForMaster =\n      props.springConfig.hasOwnProperty('toss') &&\n      props.springConfig.toss != undefined\n        ? props.springConfig.toss\n        : toss\n    const destinationPoint = add(\n      masterOffseted,\n      multiply(tossForMaster, this.masterVelocity)\n    )\n    // method for generating condition for finding the nearest snap point\n    const currentSnapPoint = (i = 0): Animated.Node<number> =>\n      i + 1 === snapPoints.length\n        ? snapPoints[i]\n        : cond(\n            lessThan(destinationPoint, middlesOfSnapPoints[i]),\n            snapPoints[i],\n            currentSnapPoint(i + 1)\n          )\n    // current snap point desired\n    this.snapPoint = currentSnapPoint()\n\n    const masterClock = new Clock()\n    const prevMasterDrag = new Value(0)\n    const wasRun: Animated.Value<number> = new Value(0)\n    this.translateMaster = block([\n      cond(\n        eq(this.panMasterState, GestureState.END),\n        [\n          set(prevMasterDrag, 0),\n          cond(\n            or(clockRunning(masterClock), not(wasRun), this.isManuallySetValue),\n            [\n              cond(this.isManuallySetValue, stopClock(masterClock)),\n              set(\n                masterOffseted,\n                this.runSpring(\n                  masterClock,\n                  masterOffseted,\n                  this.masterVelocity,\n                  cond(\n                    this.isManuallySetValue,\n                    this.manuallySetValue,\n                    this.snapPoint\n                  ),\n                  wasRun,\n                  this.isManuallySetValue\n                )\n              ),\n              set(this.isManuallySetValue, 0),\n            ]\n          ),\n        ],\n        [\n          stopClock(masterClock),\n          set(this.preventDecaying, 1),\n          set(\n            masterOffseted,\n            add(masterOffseted, sub(this.dragMasterY, prevMasterDrag))\n          ),\n          set(prevMasterDrag, this.dragMasterY),\n          set(wasRun, 0), // not sure about this move for cond-began\n          cond(\n            eq(this.panMasterState, GestureState.BEGAN),\n            stopClock(this.masterClockForOverscroll)\n          ),\n        ]\n      ),\n      cond(\n        greaterThan(masterOffseted, snapPoints[0]),\n        masterOffseted,\n        max(\n          multiply(\n            sub(\n              snapPoints[0],\n              sqrt(add(1, sub(snapPoints[0], masterOffseted)))\n            ),\n            !props.enabledInnerScrolling ? props.overdragResistanceFactor : 0\n          ),\n          masterOffseted\n        )\n      ),\n    ])\n\n    this.Y = this.withEnhancedLimits(\n      withDecaying(\n        withPreservingAdditiveOffset(this.dragY, this.panState),\n        this.panState,\n        this.decayClock,\n        this.velocity,\n        this.preventDecaying\n      ),\n      masterOffseted\n    )\n  }\n\n  private runSpring(\n    clock: Animated.Clock,\n    value: Animated.Value<number>,\n    velocity: Animated.Node<number>,\n    dest: Animated.Node<number>,\n    wasRun: Animated.Value<number>,\n    isManuallySet: Animated.Node<number> | number = 0\n  ) {\n    const state = {\n      finished: new Value(0),\n      velocity: new Value(0),\n      position: new Value(0),\n      time: new Value(0),\n    }\n\n    const config = {\n      damping,\n      mass,\n      stiffness,\n      overshootClamping,\n      restSpeedThreshold,\n      restDisplacementThreshold,\n      toValue: new Value(0),\n      ...this.props.springConfig,\n    }\n\n    return [\n      cond(clockRunning(clock), 0, [\n        set(state.finished, 0),\n        set(state.velocity, velocity),\n        set(state.position, value),\n        set(config.toValue, dest),\n        cond(and(wasRun, not(isManuallySet)), 0, startClock(clock)),\n        cond(defined(wasRun), set(wasRun, 1)),\n      ]),\n      spring(clock, state, config),\n      cond(state.finished, stopClock(clock)),\n      state.position,\n    ]\n  }\n\n  private handleMasterPan = event([\n    {\n      nativeEvent: {\n        translationY: this.dragMasterY,\n        state: this.panMasterState,\n        velocityY: this.masterVelocity,\n      },\n    },\n  ])\n\n  private handlePan = event([\n    {\n      nativeEvent: {\n        translationY: this.props.enabledInnerScrolling\n          ? this.dragY\n          : this.dragMasterY,\n        state: this.props.enabledInnerScrolling\n          ? this.panState\n          : this.panMasterState,\n        velocityY: this.props.enabledInnerScrolling\n          ? this.velocity\n          : this.masterVelocity,\n      },\n    },\n  ])\n\n  private handleTap = event([{ nativeEvent: { state: this.tapState } }])\n\n  private withEnhancedLimits(\n    val: Animated.Node<number>,\n    masterOffseted: Animated.Value<number>\n  ) {\n    const wasRunMaster = new Value(0)\n    const min = multiply(\n      -1,\n      add(this.state.heightOfContent, this.state.heightOfHeaderAnimated)\n    )\n    const prev = new Value(0)\n    const limitedVal = new Value(0)\n    const diffPres = new Value(0)\n    const flagWasRunSpring = new Value(0)\n    const justEndedIfEnded = new Value(1)\n    const wasEndedMasterAfterInner = new Value(1)\n    const prevMaster = new Value(1)\n    const prevState = new Value(0)\n    const rev = new Value(0)\n\n    return block([\n      set(rev, limitedVal),\n      cond(\n        or(\n          eq(this.panState, GestureState.BEGAN),\n          and(\n            eq(this.panState, GestureState.ACTIVE),\n            eq(prevState, GestureState.END)\n          )\n        ),\n        [\n          set(prev, val),\n          set(flagWasRunSpring, 0),\n          stopClock(this.masterClockForOverscroll),\n          set(wasRunMaster, 0),\n        ],\n        [\n          set(limitedVal, add(limitedVal, sub(val, prev))),\n          cond(lessThan(limitedVal, min), set(limitedVal, min)),\n        ]\n      ),\n      set(prevState, this.panState), // on iOS sometimes BEGAN event does not trigger\n      set(diffPres, sub(prev, val)),\n      set(prev, val),\n      cond(\n        or(greaterOrEq(limitedVal, 0), greaterThan(masterOffseted, 0)),\n        [\n          cond(\n            eq(this.panState, GestureState.ACTIVE),\n            set(masterOffseted, sub(masterOffseted, diffPres))\n          ),\n          cond(greaterThan(masterOffseted, 0), [set(limitedVal, 0)]),\n          cond(\n            not(eq(this.panState, GestureState.END)),\n            set(justEndedIfEnded, 1)\n          ),\n          cond(\n            or(\n              eq(this.panState, GestureState.ACTIVE),\n              eq(this.panMasterState, GestureState.ACTIVE)\n            ),\n            set(wasEndedMasterAfterInner, 0)\n          ),\n          cond(\n            and(\n              eq(prevMaster, GestureState.ACTIVE),\n              eq(this.panMasterState, GestureState.END),\n              eq(this.panState, GestureState.END)\n            ),\n            set(wasEndedMasterAfterInner, 1)\n          ),\n          set(prevMaster, this.panMasterState),\n          cond(\n            and(\n              eq(this.panState, GestureState.END),\n              not(wasEndedMasterAfterInner),\n              not(eq(this.panMasterState, GestureState.ACTIVE)),\n              not(eq(this.panMasterState, GestureState.BEGAN)),\n              or(clockRunning(this.masterClockForOverscroll), not(wasRunMaster))\n            ),\n            [\n              // cond(justEndedIfEnded, set(this.masterVelocity, diff(val))),\n              set(\n                this.masterVelocity,\n                cond(justEndedIfEnded, diff(val), this.velocity)\n              ),\n              set(\n                masterOffseted,\n                this.runSpring(\n                  this.masterClockForOverscroll,\n                  masterOffseted,\n                  diff(val),\n                  this.snapPoint,\n                  wasRunMaster\n                )\n              ),\n              set(this.masterVelocity, 0),\n            ]\n          ),\n          //   cond(eq(this.panState, State.END), set(wasEndedMasterAfterInner, 0)),\n          cond(eq(this.panState, GestureState.END), set(justEndedIfEnded, 0)),\n          set(this.preventDecaying, 1),\n          0,\n        ],\n        [set(this.preventDecaying, 0), limitedVal]\n      ),\n    ])\n  }\n\n  snapTo = (index: number) => {\n    if (!this.props.enabledImperativeSnapping) {\n      return\n    }\n    this.manuallySetValue.setValue(\n      // @ts-ignore\n      this.state.snapPoints[this.state.propsToNewIndices[index]]\n    )\n    this.isManuallySetValue.setValue(1)\n  }\n\n  private height: Animated.Value<number> = new Value(0)\n\n  private handleLayoutHeader = ({\n    nativeEvent: {\n      layout: { height: heightOfHeader },\n    },\n  }: LayoutChangeEvent) => {\n    this.state.heightOfHeaderAnimated.setValue(heightOfHeader)\n    this.setState({ heightOfHeader })\n  }\n\n  private handleFullHeader = ({\n    nativeEvent: {\n      layout: { height },\n    },\n  }: LayoutChangeEvent) => this.height.setValue(height)\n\n  private handleLayoutContent = ({\n    nativeEvent: {\n      layout: { height },\n    },\n  }: LayoutChangeEvent) =>\n    this.state.heightOfContent.setValue(height - this.state.initSnap)\n\n  static renumber = (str: string) =>\n    (Number(str.split('%')[0]) * screenHeight) / 100\n\n  static getDerivedStateFromProps(\n    props: Props,\n    state: State | undefined\n  ): State {\n    let snapPoints\n    const sortedPropsSnapPoints: Array<{\n      val: number\n      ind: number\n    }> = props.snapPoints\n      .map(\n        (\n          s: number | string,\n          i: number\n        ): {\n          val: number\n          ind: number\n        } => {\n          if (typeof s === 'number') {\n            return { val: s, ind: i }\n          } else if (typeof s === 'string') {\n            return { val: BottomSheetBehavior.renumber(s), ind: i }\n          }\n\n          throw new Error(`Invalid type for value ${s}: ${typeof s}`)\n        }\n      )\n      .sort(({ val: a }, { val: b }) => b - a)\n    if (state && state.snapPoints) {\n      state.snapPoints.forEach((s, i) =>\n        s.setValue(sortedPropsSnapPoints[0].val - sortedPropsSnapPoints[i].val)\n      )\n      snapPoints = state.snapPoints\n    } else {\n      snapPoints = sortedPropsSnapPoints.map(\n        p => new Value(sortedPropsSnapPoints[0].val - p.val)\n      )\n    }\n\n    const propsToNewIndices: { [key: string]: number } = {}\n    sortedPropsSnapPoints.forEach(({ ind }, i) => (propsToNewIndices[ind] = i))\n\n    const { initialSnap } = props\n\n    return {\n      init:\n        sortedPropsSnapPoints[0].val -\n        sortedPropsSnapPoints[propsToNewIndices[initialSnap]].val,\n      propsToNewIndices,\n      heightOfHeaderAnimated:\n        (state && state.heightOfHeaderAnimated) || new Value(0),\n      heightOfContent: (state && state.heightOfContent) || new Value(0),\n      initSnap: sortedPropsSnapPoints[0].val,\n      snapPoints,\n      heightOfHeader: (state && state.heightOfHeader) || 0,\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <Animated.View\n          style={{\n            height: '100%',\n            width: 0,\n            position: 'absolute',\n          }}\n          onLayout={this.handleFullHeader}\n        />\n        <Animated.View\n          style={{\n            width: '100%',\n            position: 'absolute',\n            zIndex: 100,\n            opacity: cond(this.height, 1, 0),\n            transform: [\n              {\n                translateY: this.translateMaster,\n              },\n              {\n                translateY: sub(this.height, this.state.initSnap) as any,\n              },\n            ],\n          }}\n        >\n          <PanGestureHandler\n            enabled={\n              this.props.enabledGestureInteraction &&\n              this.props.enabledHeaderGestureInteraction\n            }\n            ref={this.master}\n            waitFor={this.panRef}\n            onGestureEvent={this.handleMasterPan}\n            onHandlerStateChange={this.handleMasterPan}\n            simultaneousHandlers={this.props.simultaneousHandlers}\n          >\n            <Animated.View\n              style={{\n                zIndex: 101,\n              }}\n              onLayout={this.handleLayoutHeader}\n            >\n              {this.props.renderHeader && this.props.renderHeader()}\n            </Animated.View>\n          </PanGestureHandler>\n          <View\n            style={\n              this.props.enabledInnerScrolling && {\n                height: this.state.initSnap - this.state.heightOfHeader,\n                overflow: 'hidden',\n              }\n            }\n          >\n            <PanGestureHandler\n              enabled={\n                this.props.enabledGestureInteraction &&\n                this.props.enabledContentGestureInteraction\n              }\n              waitFor={this.master}\n              ref={this.panRef}\n              onGestureEvent={this.handlePan}\n              onHandlerStateChange={this.handlePan}\n              simultaneousHandlers={this.props.simultaneousHandlers}\n            >\n              <Animated.View>\n                <TapGestureHandler\n                  ref={this.tapRef}\n                  enabled={\n                    this.props.enabledGestureInteraction &&\n                    this.props.enabledContentGestureInteraction &&\n                    this.props.enabledContentTapInteraction\n                  }\n                  onHandlerStateChange={this.handleTap}\n                  simultaneousHandlers={this.props.simultaneousHandlers}\n                >\n                  <Animated.View\n                    style={{\n                      width: '100%',\n                      transform: [{ translateY: this.Y as any }],\n                    }}\n                    onLayout={this.handleLayoutContent}\n                  >\n                    {this.props.renderContent && this.props.renderContent()}\n                  </Animated.View>\n                </TapGestureHandler>\n              </Animated.View>\n            </PanGestureHandler>\n            <Animated.Code\n              exec={onChange(\n                this.tapState,\n                cond(\n                  eq(this.tapState, GestureState.BEGAN),\n                  stopClock(this.decayClock)\n                )\n              )}\n            />\n            {this.props.callbackNode && (\n              <Animated.Code\n                exec={onChange(\n                  this.translateMaster,\n                  set(\n                    this.props.callbackNode,\n                    divide(\n                      this.translateMaster,\n                      this.state.snapPoints[this.state.snapPoints.length - 1]\n                    )\n                  )\n                )}\n              />\n            )}\n            {(this.props.onOpenStart || this.props.onCloseEnd) && (\n              <Animated.Code\n                exec={onChange(this.translateMaster, [\n                  cond(\n                    and(\n                      lessOrEq(\n                        divide(\n                          this.translateMaster,\n                          this.state.snapPoints[\n                            this.state.snapPoints.length - 1\n                          ]\n                        ),\n                        1 -\n                          (this.props.callbackThreshold\n                            ? this.props.callbackThreshold\n                            : 0.01)\n                      ),\n                      neq(this.onOpenStartValue, 1)\n                    ),\n                    [\n                      call([], () => {\n                        if (this.props.onOpenStart) this.props.onOpenStart()\n                      }),\n                      set(this.onOpenStartValue, 1),\n                      cond(\n                        defined(this.onCloseEndValue),\n                        set(this.onCloseEndValue, 0)\n                      ),\n                    ]\n                  ),\n                ])}\n              />\n            )}\n            {(this.props.onOpenEnd || this.props.onCloseStart) && (\n              <Animated.Code\n                exec={onChange(this.translateMaster, [\n                  cond(\n                    and(\n                      lessOrEq(\n                        divide(\n                          this.translateMaster,\n                          this.state.snapPoints[\n                            this.state.snapPoints.length - 1\n                          ]\n                        ),\n                        this.props.callbackThreshold\n                          ? this.props.callbackThreshold\n                          : 0.01\n                      ),\n                      neq(this.onOpenEndValue, 1)\n                    ),\n                    [\n                      call([], () => {\n                        if (this.props.onOpenEnd) this.props.onOpenEnd()\n                      }),\n                      set(this.onOpenEndValue, 1),\n                      cond(\n                        defined(this.onCloseStartValue),\n                        set(this.onCloseStartValue, 0)\n                      ),\n                    ]\n                  ),\n                ])}\n              />\n            )}\n            {(this.props.onCloseStart || this.props.onOpenEnd) && (\n              <Animated.Code\n                exec={onChange(this.translateMaster, [\n                  cond(\n                    and(\n                      greaterOrEq(\n                        divide(\n                          this.translateMaster,\n                          this.state.snapPoints[\n                            this.state.snapPoints.length - 1\n                          ]\n                        ),\n                        this.props.callbackThreshold\n                          ? this.props.callbackThreshold\n                          : 0.01\n                      ),\n                      neq(this.onCloseStartValue, 1)\n                    ),\n                    [\n                      call([], () => {\n                        if (this.props.onCloseStart) this.props.onCloseStart()\n                      }),\n                      set(this.onCloseStartValue, 1),\n                      cond(\n                        defined(this.onCloseStartValue),\n                        set(this.onOpenEndValue, 0)\n                      ),\n                    ]\n                  ),\n                ])}\n              />\n            )}\n            {(this.props.onCloseEnd || this.props.onOpenStart) && (\n              <Animated.Code\n                exec={onChange(this.translateMaster, [\n                  cond(\n                    and(\n                      greaterOrEq(\n                        divide(\n                          this.translateMaster,\n                          this.state.snapPoints[\n                            this.state.snapPoints.length - 1\n                          ]\n                        ),\n                        1 -\n                          (this.props.callbackThreshold\n                            ? this.props.callbackThreshold\n                            : 0.01)\n                      ),\n                      neq(this.onCloseEndValue, 1)\n                    ),\n                    [\n                      call([], () => {\n                        if (this.props.onCloseEnd) this.props.onCloseEnd()\n                      }),\n                      set(this.onCloseEndValue, 1),\n                      cond(\n                        defined(this.onOpenStartValue),\n                        set(this.onOpenStartValue, 0)\n                      ),\n                      cond(\n                        defined(this.onOpenEndValue),\n                        set(this.onOpenEndValue, 0)\n                      ),\n                    ]\n                  ),\n                ])}\n              />\n            )}\n            {this.props.contentPosition && (\n              <Animated.Code\n                exec={onChange(\n                  this.Y,\n                  set(this.props.contentPosition, sub(0, this.Y))\n                )}\n              />\n            )}\n            {this.props.headerPosition && (\n              <Animated.Code\n                exec={onChange(\n                  this.translateMaster,\n                  set(this.props.headerPosition, this.translateMaster)\n                )}\n              />\n            )}\n          </View>\n        </Animated.View>\n      </React.Fragment>\n    )\n  }\n}\n"]}